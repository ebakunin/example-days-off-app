<app-menu></app-menu>

<h1 class="title">{{ 'Example Day Off Scheduling App' | translate | async }}</h1>

<section>
    <ng-container *ngIf="dataIsReady; else showSkeleton">
        <app-schedule-exception-management
            [startingViewDate]="startingViewDate"
            [closedDays]="(office$ | async)?.closedDays ?? []"
            [closedDates]="(office$ | async)?.closedDates ?? []"
            [daysOff]="(employee$ | async)?.daysOff ?? []"
            (newExceptions)="newExceptionDates = $event"
            (exceptionsToBeDeleted)="exceptionDatesToBeDeleted = $event"
            (currentViewedMonth)="currentViewedMonth = $event">
        </app-schedule-exception-management>
    </ng-container>
    <ng-template #showSkeleton>
        <p-skeleton width="515px" styleClass="days-off-skeleton"></p-skeleton>
        <p-skeleton width="370px" styleClass="days-off-skeleton"></p-skeleton>
    </ng-template>

    <br class="clear">

    <div style="margin-top: 20px">
        <button type="button"
                class="button-primary"
                [disabled]="newExceptionDates.length === 0 && exceptionDatesToBeDeleted.length === 0"
                (click)="onSave()">
            {{ 'SYSTEM_SAVE' | translate | async }}
        </button>
    </div>
</section>

<div *ngIf="showMesh$ | async" class="mesh"></div>
<p-toast position="bottom-center"></p-toast>

<app-spinner></app-spinner>
<app-explanations></app-explanations>
<app-contact></app-contact>

<footer>Â© 2021</footer>
